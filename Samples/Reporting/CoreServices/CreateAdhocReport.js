'use strict'

var CybersourceRestApi = require('CyberSource');

/**
 * This is a sample code to call ReportsApi,
 * retrive transaction by username
 */
function createAdhocReport() {

    var apiClient = new CybersourceRestApi.ApiClient();
    var instance = new CybersourceRestApi.ReportsApi(apiClient);

    var request = new CybersourceRestApi.RequestBody1();
    request.report_definition_name = "ChargebackAndRetrievalDetailClass"
    request.timezone = "GMT"
    request.report_mime_type = "text/csv"
    request.report_name = "TRR_133"
    request.report_start_time = "2017-11-22T12:00:00+05:00"
    request.report_end_time = "2017-11-23T12:00:00+05:00"
    request.report_filters = ""
    request.report_preferences = ""
    request.report_fields = ["PaymentData.AuthorizationType",
        "PaymentData.AuthorizationCode",
        "PaymentData.AVSResult",
        "PaymentData.CurrencyCode",
        "PaymentData.AVSResultMapped",
        "PaymentData.CVResult",
        "PaymentData.ProcessorResponseCode",
        "PaymentData.NumberOfInstallments",
        "PaymentData.ACHVerificationResult",
        "PaymentData.ACHVerificationResultMapped",
        "PaymentData.BalanceAmount",
        "PaymentData.BalanceCurrencyCode",
        "PaymentData.RequestedAmount",
        "PaymentData.RequestedAmountCurrencyCode",
        "PaymentData.EVEmail",
        "PaymentData.EVEmailRaw",
        "PaymentData.EVName",
        "PaymentData.EVNameRaw",
        "PaymentData.EVPhoneNumber",
        "PaymentData.EVPhoneNumberRaw",
        "PaymentData.EVStreet",
        "PaymentData.EVStreetRaw",
        "PaymentData.EVPostalCode",
        "PaymentData.EVPostalCodeRaw",
        "PaymentData.BinNumber",
        "LineItems.FulfillmentType",
        "LineItems.Quantity",
        "LineItems.UnitPrice",
        "LineItems.TaxAmount",
        "LineItems.MerchantProductSku",
        "LineItems.ProductName",
        "LineItems.ProductCode",
        "LineItems.InvoiceNumber",
        "BillTo.NameSuffix",
        "BillTo.FirstName",
        "BillTo.LastName",
        "BillTo.MiddleName",
        "BillTo.Address1",
        "BillTo.Address2",
        "BillTo.City",
        "BillTo.State",
        "BillTo.Zip",
        "BillTo.Country",
        "BillTo.CompanyName",
        "BillTo.Email",
        "BillTo.Title",
        "BillTo.Phone",
        "PaymentMethod.CardType",
        "PaymentMethod.ExpirationMonth",
        "PaymentMethod.ExpirationYear",
        "PaymentMethod.StartMonth",
        "PaymentMethod.StartYear",
        "PaymentMethod.IssueNumber",
        "PaymentMethod.AccountSuffix",
        "PaymentMethod.AccountType",
        "PaymentMethod.BoletoNumber",
        "PaymentData.CardCategory",
        "PaymentData.CardCategoryCode",
        "PaymentMethod.WalletType",
        "PaymentMethod.CheckNumber",
        "PaymentMethod.MandateId",
        "PaymentMethod.MandateType",
        "PaymentMethod.SignatureDate",
        "Travel.CompleteRoute",
        "Travel.JourneyType",
        "Travel.DepartureDateTime",
        "Travel.PassengerFirstName",
        "Travel.PassengerLastName",
        "Travel.PassengerId",
        "Travel.PassengerStatus",
        "Travel.PassengerType",
        "Travel.PassengerPhone",
        "Travel.PassengerEmail",
        "Application.Rcode",
        "Application.Rflag",
        "Application.Rmsg",
        "ShipTo.Address1",
        "ShipTo.Address2",
        "ShipTo.City",
        "ShipTo.State",
        "ShipTo.Zip",
        "ShipTo.Country",
        "ShipTo.Phone",
        "ShipTo.CompanyName",
        "Application.ReasonCode",
        "Risk.Factors",
        "Risk.HostSeverity",
        "Risk.Score",
        "Risk.ConsumerPasswordProvided",
        "Risk.LostPassword",
        "Risk.RepeatCustomer",
        "Risk.CookiesAccepted",
        "Risk.ConsumerLoyalty",
        "Risk.ConsumerPromotions",
        "Risk.GiftWrap",
        "Risk.ReturnsAccepted",
        "Risk.ProductRisk",
        "Risk.AppliedThreshold",
        "Risk.AppliedTimeHedge",
        "Risk.AppliedVelocityHedge",
        "Risk.AppliedHostHedge",
        "Risk.AppliedCategoryGift",
        "Risk.AppliedCategoryTime",
        "Risk.AppliedAVS",
        "Risk.CodeValue",
        "Risk.AppliedCV",
        "Risk.BinAccountType",
        "Risk.BinScheme",
        "Risk.BinIssuer",
        "Risk.BinCountry",
        "Risk.IPCity",
        "Risk.IPCountry",
        "Risk.IPRoutingMethod",
        "Risk.IPState",
        "Risk.DeviceFingerPrint",
        "Risk.CookiesEnabled",
        "Risk.FlashEnabled",
        "Risk.ImagesEnabled",
        "Risk.JavascriptEnabled",
        "Risk.ProxyIPAddress",
        "Risk.ProxyIPAddressActivities",
        "Risk.ProxyIPAddressAttributes",
        "Risk.ProxyServerType",
        "Risk.TrueIPAddress",
        "Risk.TrueIPaddressActivities",
        "Risk.TrueIPAddressAttributes",
        "Risk.TrueIPAddressCountry",
        "Risk.TrueIPAddressCity",
        "Risk.CodeType",
        "Risk.TimeLocal",
        "BillTo.IPAddress",
        "BillTo.HostName",
        "BillTo.UserName",
        "BillTo.CustomerID",
        "PaymentData.Amount",
        "PaymentData.PaymentRequestID",
        "PaymentData.PaymentProcessor",
        "PaymentData.TotalTaxAmount",
        "PaymentData.EventType",
        "PaymentData.GrandTotal",
        "PaymentData.ECI",
        "PaymentData.AAV_CAVV",
        "PaymentData.XID",
        "Profile.ProfileMode",
        "Profile.ProfileDecision",
        "Profile.RuleName",
        "Profile.RuleDecision",
        "Shipping.Method",
        "Shipping.Carrier",
        "Request.RequestID",
        "Request.SubscriptionID",
        "Request.Comments",
        "PaymentData.TransactionRefNumber",
        "PaymentData.eCommerceIndicator",
        "Request.Source",
        "Request.User",
        "Request.TransactionDate",
        "LineItems.Number",
        "Request.MerchantReferenceNumber",
        "Application.Name",
        "Profile.Name",
        "MerchantDefinedData.Field1",
        "MerchantDefinedData.Field2",
        "MerchantDefinedData.Field3",
        "MerchantDefinedData.Field4",
        "MerchantDefinedData.Field5",
        "MerchantDefinedData.Field6",
        "MerchantDefinedData.Field7",
        "MerchantDefinedData.Field8",
        "MerchantDefinedData.Field9",
        "MerchantDefinedData.Field10",
        "MerchantDefinedData.Field11",
        "MerchantDefinedData.Field12",
        "MerchantDefinedData.Field13",
        "MerchantDefinedData.Field14",
        "MerchantDefinedData.Field15",
        "MerchantDefinedData.Field16",
        "MerchantDefinedData.Field17",
        "MerchantDefinedData.Field18",
        "MerchantDefinedData.Field19",
        "MerchantDefinedData.Field20",
        "ShipTo.FirstName",
        "ShipTo.LastName",
        "Request.MerchantID",
        "Travel.Number",
        "PaymentData.ReconciliationID",
        "PaymentData.TargetAmount",
        "PaymentData.TargetCurrency",
        "PaymentData.ExchangeRate",
        "PaymentData.ExchangeRateDate",
        "PaymentData.DCCIndicator",
        "PaymentMethod.BankCode",
        "PaymentMethod.BankAccountName",
        "PaymentData.AuthIndicator",
        "PaymentData.AuthReversalResult",
        "PaymentData.AuthReversalAmount",
        "PaymentData.CardPresent",
        "PaymentData.POSEntryMode",
        "PaymentData.EMVRequestFallBack",
        "Request.PartnerOriginalTransactionID",
        "Request.TerminalSerialNumber",
        "PaymentData.POSCatLevel",
        "Request.PartnerSDKVersion",
        "PaymentData.CardVerificationMethod",
        "PaymentData.POSEnvironment",
        "PaymentData.TerminalIDAlternate",
        "PaymentData.RoutingNetworkType",
        "PaymentData.StoreAndForwardIndicator",
        "PaymentData.PinType",
        "PaymentData.IssuerResponseCode",
        "PaymentData.AcquirerMerchantNumber",
        "PaymentData.AcquirerMerchantID",
        "PaymentData.PaymentProductCode",
        "PaymentData.NetworkCode",
        "PaymentData.MandateReferenceNumber",
        "PaymentData.ProcessorTransactionID",
        "PaymentData.ProcessorMID",
        "PaymentData.SubMerchantCity",
        "PaymentData.SubMerchantCountry",
        "PaymentData.SubMerchantEmail",
        "PaymentData.SubMerchantID",
        "PaymentData.SubMerchantName",
        "PaymentData.SubMerchantPhone",
        "PaymentData.SubMerchantPostalCode",
        "PaymentData.SubMerchantState",
        "PaymentData.SubMerchantStreet",
        "ChargebackAndRetrieval.ARN",
        "ChargebackAndRetrieval.MerchantCategoryCode",
        "ChargebackAndRetrieval.TransactionType",
        "ChargebackAndRetrieval.CaseNumber",
        "ChargebackAndRetrieval.ChargebackAmount",
        "ChargebackAndRetrieval.ChargebackCurrency",
        "ChargebackAndRetrieval.CaseIdentifier",
        "ChargebackAndRetrieval.CaseType",
        "ChargebackAndRetrieval.CaseTime",
        "ChargebackAndRetrieval.ChargebackTime",
        "ChargebackAndRetrieval.AdjustmentAmount",
        "ChargebackAndRetrieval.AdjustmentCurrency",
        "ChargebackAndRetrieval.FeeAmount",
        "ChargebackAndRetrieval.FeeCurrency",
        "ChargebackAndRetrieval.FinancialImpact",
        "ChargebackAndRetrieval.FinancialImpactType",
        "ChargebackAndRetrieval.PartialIndicator",
        "ChargebackAndRetrieval.DocumentIndicator",
        "ChargebackAndRetrieval.RespondByDate",
        "ChargebackAndRetrieval.ChargebackReasonCode",
        "ChargebackAndRetrieval.ChargebackReasonCodeDescription",
        "ChargebackAndRetrieval.ResolvedToIndicator",
        "ChargebackAndRetrieval.ResolutionTime",
        "ChargebackAndRetrieval.ChargebackMessage",
        "ChargebackAndRetrieval.ChargebackOriginalAmount",
        "ChargebackAndRetrieval.ChargebackOriginalCurrency",
        "BillTo.PersonalID",
        "BillTo.CompanyTaxID",
        "PaymentData.ProcessorResponseID",
        "PaymentData.ProcessorTID",
        "PaymentData.NetworkTransactionID",
        "PaymentMethod.BoletoBarCodeNumber",
        "Sender.SenderReferenceNumber",
        "Recipient.RecipientBillingAmount",
        "Recipient.RecipientBillingCurrency",
        "Recipient.FirstName",
        "Recipient.MiddleInitial",
        "Recipient.ReferenceNumber",
        "Recipient.LastName",
        "Recipient.Address",
        "Recipient.City",
        "Recipient.State",
        "Recipient.Country",
        "Recipient.PostalCode",
        "Recipient.PhoneNumber",
        "Recipient.DOB",
        "Sender.Address",
        "Sender.City",
        "Sender.State",
        "Sender.PostalCode",
        "Sender.Country",
        "Sender.SourceOfFunds",
        "Sender.FirstName",
        "Sender.MiddleInitial",
        "Sender.LastName",
        "Sender.PhoneNumber",
        "Sender.DOB",
        "BatchFiles.BatchFileID",
        "Device.DeviceID",
        "Check.AccountEncoderID",
        "Check.SecCode",
        "Check.BankTransitNumber",
        "BankInfo.Address",
        "BankInfo.BranchCode",
        "BankInfo.City",
        "BankInfo.Country",
        "BankInfo.Name",
        "BankInfo.SwiftCode",
        "FundTransfer.BankCheckDigit",
        "FundTransfer.IbanIndicator",
        "Token.TokenCode",
        "Token.NetworkTokenTransType"]

    instance.createReport(request, function (error, data, response) {
        if (error) {
            console.log("Error : " + error);
            console.log("Error : " + error.stack);
            console.log("Error status code : " + error.statusCode);
        }
        else if (data) {
            console.log("Data : " + JSON.stringify(data));
        }
        console.log("Response : " + JSON.stringify(response));
        console.log("Response id : " + response[text.id]);

    });

};
if (require.main === module) {
    createAdhocReport(function () {
        console.log('Method call complete.');
    });
}
module.exports.createAdhocReport = createAdhocReport;
